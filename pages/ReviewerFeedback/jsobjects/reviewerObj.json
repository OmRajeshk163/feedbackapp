{
  "unpublishedCollection": {
    "name": "reviewerObj",
    "pageId": "ReviewerFeedback",
    "pluginId": "js-plugin",
    "pluginType": "JS",
    "actions": [],
    "archivedActions": [],
    "body": "export default {\n\tfeedbackId:0,\n\tgetEmpOptions: () => {\n\t\tlet empData= [];\n\t\tconst uniqueIds = [];\n\t\t\tgetEmployees.data.map(employee=>{\n\t\t  getEmployees.data.map(emp=>{\n\t\t\t\tif(employee.id===emp.reviewer){\n\t\t\t\t\tempData=[...empData,{label:employee.name, value:employee.id}];\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\t\tconst uniqueReviewers = empData.filter(element => {\n        const isDuplicate = uniqueIds.includes(element.value);\n        if (!isDuplicate) {\n           uniqueIds.push(element.value);\n           return true;\n        }\n        return false;\n    });\n\t\treturn uniqueReviewers;\n\t},\n\tgetReviewerRole:()=>{\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconsole.log(\"imHererergetEmployeesere123456\",reviewerId)\n\t\tif(reviewerId){\n\t\t\t\tconst reviewerData = getEmployees.data.find(reviewer=>reviewer.id===reviewerId)\n\t\t\t\treturn reviewerData.role??\"\";\n\t\t}\n\t},\n\tgetReviewerLevel:()=>{\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconsole.log(\"imHererergetEmployeesere123456\")\n\t\tif(reviewerId){\n\t\t\t\tconst reviewerData = getEmployees.data.find(reviewer=>reviewer.id===reviewerId)\n\t\t\t\treturn reviewerData.level??\"\";\n\t\t}\n\t},\n\tgetFeedbackOptions: () => {\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconst getOptions=getEmployees.data.map(emp=>({label:emp.name,value:emp.id}));\n\t\treturn getOptions.filter(itm=>itm.value!=reviewerId)??[];\n\t},\n\tgetfeedbackRole:()=>{\n\t\tconst selfId=toName.selectedOptionValue;\n\t\tconsole.log(\"imHererergetEmployeesere123456\")\n\t\tif(selfId){\n\t\t\t\tconst selfIdData = getEmployees.data.find(self=>self.id===selfId)\n\t\t\t\treturn selfIdData.role??\"\";\n\t\t}\n\t},\n\tgetfeedbackLevel:()=>{\n\t\tconst selfId=toName.selectedOptionValue;\n\t\tif(selfId){\n\t\t\t\tconst selfIdData = getEmployees.data.find(self=>self.id===selfId)\n\t\t\t\treturn selfIdData.level??\"\";\n\t\t}\n\t},\n\tgetReviewerFeedback:()=>{\n\t\tconst feedbackList=getFeedback.data;\n\t\tconst selectedCategory=kraCategories.selectedOptionValue;\n\t\tconst toId=toName.selectedOptionValue;\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconst feedback=feedbackList.filter(feedback=>feedback.from_employee===reviewerId &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfeedback.to_employee===toId &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfeedback.category===selectedCategory &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\"reviewer\"].includes(feedback.feedback_type)&&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  feedback.cycle===feedbackObj.getRDateForCycle());\n\t\treviewerObj.feedbackId=feedback[0]?.id;\n\t\tconsole.log(\"feedbackfeedback\",feedback,reviewerObj.feedbackId);\n\t\treturn feedback[0]??{rating:0,feedback_continue:\"\",feedback_more_of:\"\"};\n\t},\n\tdisableCreatebtn:()=>{\n\t\tconst currentFeedBack=reviewerObj.feedbackId;\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconst selectedCategory=kraCategories.selectedOptionValue;\n\t\tconst feedbacks = getFeedback.data.filter(fdbk=>fdbk.from_employee === reviewerId && \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfdbk.to_employee === toName.selectedOptionValue &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfdbk.cycle===feedbackObj.getRDateForCycle()&&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\tfdbk.category === selectedCategory);\n\t\tif(reviewerFeed_continue.text.length == 0 && reviewerFeed_moreOf.text.length == 0) return true;\n\t\tif(reviewerId.length===0 || toName.selectedOptionValue.length===0 || selectedCategory.length===0) return true;\n\t\tif(feedbacks.length === 0 && reviewerFeed_continue.text.length > 0 && \n\t\t\t reviewerFeed_moreOf.text.length > 0) \n\t\t\t\t return false;\n\t\telse return true;\n\n\t/*\n\t\tif(reviewerId.length==0){\n\t\t\treturn true\n\t\t}\n\t\tconsole.log(\"isFeedbackPostedoutt\",currentFeedBack==undefined,currentFeedBack.length==0);\n\t\tif(reviewerFeed_continue.text.length==0||reviewerFeed_moreOf.text.length==0){\n\t\t\treturn true\n\t\t}\n\t\tif(currentFeedBack==undefined||currentFeedBack.length==0){\n\t\t\treturn true\n\t\t}else{\n\t\t\tconsole.log(\"feedbacks123456\",feedbacks);\n\t\t\tconst isFeedbackPosted=feedbacks.length > 0;\n\t\t\tconsole.log(\"isFeedbackPosted\",feedbacks,isFeedbackPosted);\n\t\t\treturn !isFeedbackPosted;\n\t\t}\n\t*/\n\t},\n\tdisableUpdatebtn:()=>{  \n\tconst currentFeedBack=reviewerObj.feedbackId;\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconst selectedCategory=kraCategories.selectedOptionValue;\n\t\tconst feedbacks = getFeedback.data.filter(fdbk=>fdbk.from_employee === reviewerId && \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfdbk.to_employee === toName.selectedOptionValue &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfdbk.cycle===feedbackObj.getRDateForCycle()&&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t \t\t\t\tfdbk.category === selectedCategory);\n\t\tif(reviewerFeed_continue.text.length == 0 && reviewerFeed_moreOf.text.length == 0) return true;\n\t\tif(reviewerId.length===0 || toName.selectedOptionValue.length===0 || selectedCategory.length===0) return true;\n\t\tif(feedbacks.length>0&&reviewerFeed_continue.text.length > 0 && reviewerFeed_moreOf.text.length > 0) return false;\n\t\telse return true;\n\t},\n\t\tsubmitreview:()=>{\n\t\tconsole.log(\"feedbackId\",reviewerObj.feedbackId);\n\t},\n\tgetReviewerSummary:()=>{\n\t\tconst feedbackList=getFeedback.data;\n\t\tconst toId=toName.selectedOptionValue;\n\t\tconst categories= getKraCategories.data;\n\t\tconst reviewerId=reviewerName.selectedOptionValue;\n\t\tconst feedback=feedbackList.map(feedback=>{\n\t\t\tif(feedback.from_employee===reviewerId &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfeedback.to_employee===toId &&\n\t\t\t\t \t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfeedback.cycle===feedbackObj.getRDateForCycle() &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t[\"reviewer\"].includes(feedback.feedback_type)){\n\t\t\t\treturn {...feedback,category:categories.find(category=>category.id===feedback.category).name}\n\t\t\t}\n\t\t}).filter(e=>e);\n\t\tconsole.log(\"feedbackfeedback\",feedback[0],reviewerObj.feedbackId);\n\t\treturn feedback;\n\t}\n}",
    "variables": [
      {
        "name": "feedbackId",
        "value": "0"
      }
    ],
    "userPermissions": []
  },
  "id": "ReviewerFeedback_reviewerObj",
  "deleted": false,
  "gitSyncId": "6361ef20dfa75b056e2ed6b2_636387a0956dd31e95b0aee7"
}